define(["require","jquery","json!ekyna-form/plugins","autosize","select2","jquery/form"],function(a,b,c,d){"use strict";function e(a){a.each(function(){var a=b('a[href="#'+b(this).attr("id")+'"]');1===a.length&&a.tab("show")})}b.fn.select2.defaults.set("theme","bootstrap"),b.fn.select2.defaults.set("width",null);var f=function(a,c){this.$elem=b(a),this.options=c};f.prototype={constructor:f,getElement:function(){return this.$elem},init:function(e){d(this.$elem.find("textarea").not(".tinymce"));var f={};e&&1===e.length&&(f.dropdownParent=e),this.$elem.find("select.select2").select2(f);var g=this;b.each(c,function(c,d){var e=g.$elem;e.is(c)||(e=g.$elem.find(c)),0<e.length&&b.each(d,function(b,c){a([c],function(a){a.init(e)})})}),this.$elem.data("form",this)},destroy:function(){d.destroy(this.$elem.find("textarea").not(".tinymce")),this.$elem.find("select.select2").select2("destroy");var e=this;b.each(c,function(c,d){var f=e.$elem;f.is(c)||(f=e.$elem.find(c)),0<f.length&&b.each(d,function(b,c){a([c],function(a){a.hasOwnProperty("destroy")&&a.destroy(f)})})})},save:function(){var d=this;b.each(c,function(c,e){var f=d.$elem;f.is(c)||(f=d.$elem.find(c)),0<f.length&&b.each(e,function(b,c){a([c],function(a){a.hasOwnProperty("save")&&a.save(f)})})})}},b(".form-with-tabs input, .form-with-tabs textarea, .form-with-tabs select").on("invalid",function(a){var c=b(a.target).eq(0).parents(".tab-pane");return c.length?void e(c):void a.preventDefault()});var g=b("form .has-error");return g.length&&e(g.eq(0).parents(".tab-pane")),{create:function(a,b){return new f(a,b)}}});